# 02 コンポーネント体系

コンポーネントは 2 つのレイヤーに分かれる。

- **L2 基盤コンポーネント**（`src/components/ui/`）— プロジェクト非依存の汎用 UI 部品
- **L3 ドメインコンポーネント**（`src/components/domain/`）— 本アプリ固有の UI 部品

L3 は L2 の組み合わせで構築する。

## エージェント向け指示

- 新しい UI を実装する前に既存コンポーネントを確認し、再利用せよ。
- L2 の新規追加が必要な場合は、事前に確認を求めよ。
- L3 は L2 の組み合わせで構築せよ。素の HTML 要素を直接スタイリングしない。

---

## L2 基盤コンポーネント

配置先: `src/components/ui/`

### 一覧

| 分類 | コンポーネント | 備考 |
|---|---|---|
| **操作** | Button | Variant: primary / secondary / ghost / danger。Size: sm / md / lg |
| | Input | テキスト入力。バリデーション状態の視覚表現を含む |
| | Textarea | 複数行テキスト入力 |
| **表示** | Badge | 汎用ラベル |
| | Tag | 取り外し可能なタグ |
| | Avatar | ユーザーアイコン。イニシャルフォールバック付き |
| | Icon | アイコンセットのラッパー |
| **レイアウト** | Stack | Flexbox ベースの汎用配置（垂直・水平） |
| | Container | 最大幅制約 + 中央寄せ |
| | Grid | レスポンシブグリッド |
| | Divider | 区切り線 |
| **フィードバック** | Toast | 操作完了・エラー通知 |
| | Skeleton | 読込中の仮表示 |
| | EmptyState | データなし時の案内表示 |
| | Modal | 確認ダイアログ等 |
| | Spinner | インライン読込表示 |
| **ナビゲーション** | Header | アプリ上部バー |
| | Tab | タブ切替 |
| | Sidebar | サイドナビゲーション |

各コンポーネントはデザイントークンのみを参照し、ハードコード値を含まない。

---

## L3 ドメインコンポーネント

配置先: `src/components/domain/`

このプロジェクトのビジネスドメインに固有の UI 部品。

### カード関連

| コンポーネント | 役割 |
|---|---|
| ThankYouCard | 感謝カード本体の表示。送信者・受信者・メッセージ・コンピテンシータグを含む |
| CardComposer | カード作成フォーム。宛先選択 + メッセージ入力 + AI ラベルプレビュー |
| CompetencyBadge | コンピテンシーの表示。対応するピクトグラム・色・ラベルを表示する。色は `--ds-color-competency-*` トークンを使用し、アイコンはプロジェクトで用意したピクトグラム画像を使用する |

### タイムライン関連

| コンポーネント | 役割 |
|---|---|
| CardTimeline | 感謝カードのフィード表示 |
| TimelineFilter | 期間・部署・コンピテンシーでの絞り込み |

### 分析関連

| コンポーネント | 役割 |
|---|---|
| CompetencyRadarChart | コンピテンシー分布のレーダーチャート |
| DepartmentHeatmap | 部署間の交流量ヒートマップ |
| MonthlyReportCard | 月次サマリー表示 |

### ユーザー関連

| コンポーネント | 役割 |
|---|---|
| MemberPicker | 送信先の社員を検索・選択する UI |
| ProfileSummary | 受け取ったカード数やコンピテンシー傾向の表示 |

---

## 配置先の判断基準

| 質問 | はい | いいえ |
|---|---|---|
| 他プロジェクトでも使えるか？ | `ui/`（L2） | 次へ |
| 2 箇所以上で使われるか？ | `domain/`（L3） | ページ内にインラインで定義 |
| ビジネスロジックを含むか？ | `domain/`（L3） | `ui/`（L2） |

---

## 命名規約

| 対象 | 規約 | 例 |
|---|---|---|
| コンポーネント名 | PascalCase | `ThankYouCard`, `CompetencyBadge` |
| コンポーネントファイル名 | コンポーネント名と一致 | `ThankYouCard.{ext}` |
| ディレクトリ | kebab-case | `ui/`, `domain/` |
