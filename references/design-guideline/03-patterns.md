# 03 パターン・ガイドライン

コンポーネントの使い方・レイアウトの組み合わせ方・文言のトーンを規定するルール。チーム全員と AI が同じ判断をするための「約束」。

> 本ドキュメントはデザインシステムの **原則** を定める。各画面の具体的なフローや仕様は、要件定義・スプリントプランニングの中で別途確定する。

## エージェント向け指示

- 新しい画面を作成するときは、このドキュメントのレイアウトパターンと UI ルールに従え。
- UI 文言はトーンガイドに沿って作成せよ。

---

## レイアウト

### ページ構成

すべてのページは「Header（固定）→ Main Content → Footer（任意）」の構成を基本とする。

コンテンツエリアのバリエーション:

| パターン | 適するケース |
|---|---|
| シングルカラム | フォーム、詳細表示など焦点を絞る画面 |
| サイドバー付き | フィルタリングを伴う一覧画面 |
| グリッド | カードなど同型要素の繰り返し表示 |

### レスポンシブ方針

モバイルファースト。PC ブラウザがメインだが、スマートフォン閲覧も想定する。

CSS Grid（`auto-fill` / `minmax` 等）を活用し、明示的なブレイクポイント分岐なしでレスポンシブにする設計を基本とする。Grid だけでは対応できないレイアウト変化に限り、コンテナクエリで補う。メディアクエリは使用しない。詳細は [01-tokens.md](./01-tokens.md) のレスポンシブ設計の項を参照。

---

## インタラクションの原則

個別の画面フローではなく、アプリ全体で一貫させるべき振る舞いのルール。

### 状態表現

すべてのユーザー操作に対して、以下の状態を適切に表現すること。

| 状態 | 原則 |
|---|---|
| 待機中 | 操作可能であることが視覚的に明確 |
| 処理中 | Spinner 等で処理中であることを伝える。トリガーとなった操作は無効化し、二重実行を防ぐ |
| 完了 | Toast 等で結果をフィードバックする |
| エラー | 何が起きたか・どうすればよいかを伝える。ユーザーの入力は保持する（消さない） |
| データなし | EmptyState で次のアクションを案内する |

### ローディング

| 原則 | 説明 |
|---|---|
| 形状を予約する | ページ初回読込時は Skeleton でコンテンツの形状を仮表示し、レイアウトシフトを防ぐ |
| チラつきを防ぐ | 体感 0.3 秒未満の処理ではローディング表示を出さない |
| 位置を近くする | 処理中表示は、トリガーとなった操作の近くに配置する |

### エラー表示

| 原則 | 説明 |
|---|---|
| 解決策を先に伝える | 「何が起きたか」より「どうすればよいか」を優先して表示する |
| 表示位置を使い分ける | バリデーションエラーはフィールド直下にインライン表示。通信エラー等はグローバルな Toast |
| ユーザーの入力を消さない | エラー発生時、フォームの入力内容は保持する |

### モーダル

- 確認が必要な操作にのみ使う。情報表示だけならページ遷移やインライン展開を優先する。
- ネストしない。背景スクロールを無効化する。

---

## 文言・トーンガイド

[00-concept.md](./00-concept.md) の世界観に基づく。

### 基本トーン

温かく、簡潔で、肯定的。カジュアルすぎず堅すぎない丁寧語。「そっと思い出させてくれる」存在として、押しつけがましさを排し、静かな温かさを基調とする。

### 書き方の原則

| 要素 | ルール |
|---|---|
| ボタン | 動詞で始める |
| 見出し | 名詞 or 体言止め |
| 説明文 | 1〜2 文で端的に |
| プレースホルダー | 入力例を示す |
| エラーメッセージ | 解決策を先に。否定表現を避ける |
| 空状態 | メッセージ + 次のアクションへの案内をセットで |

---

## 命名規約

| 対象 | 規約 | 例 |
|---|---|---|
| コンポーネント名 | PascalCase | `ThankYouCard` |
| CSS 変数 | `--ds-{category}-{name}` | `--ds-color-primary-500` |
| Pencil レイヤー名 | kebab-case | `thank-you-card-container` |
| 定数 | UPPER_SNAKE_CASE | `COMPETENCY_MAP` |
| ディレクトリ | kebab-case | `ui/`, `domain/` |

Pencil レイヤーの命名は AI がクラス名やコンポーネント構造を推測する材料になるため、特に重要。`Frame 42` のような自動命名は必ず書き換える。
